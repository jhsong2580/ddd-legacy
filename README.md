# 키친포스

## 퀵 스타트

```sh
cd docker
docker compose -p kitchenpos up -d
```

## 요구 사항

- 간단한 포스기 프로그램을 구현한다.
- 상품
    - [ ]  상품의 이름은 비속어를 넣을수 없다.
      -> https://www.purgomalum.com/service/containsprofanity?text={{검사할 이름}} 을 통해 확인한다.
    - [ ] 상품의 가격은 항상 0보다 커야한다.
    - [ ] 상품의 가격이 변경될땐 상품의 포함된 Menu를 전부 조사해야한다.  
      - [ ]  메뉴에 포함된 상품 가격의 합이 메뉴 가격보다 적으면 안된다. ( 메뉴에 포함된 상품 가격의 총 합 > 메뉴 가격)
      - [ ]  만약 메뉴 가격이 더 클때는 메뉴의 disply를 false로 설정해 주어야 한다.
    - [ ] 상품 리스트를 전부 가져올수 있어야 한다.
- 메뉴 그룹
    - [ ]  메뉴 그룹에 이름은 필수로 넣어야 한다.
- 메뉴
    - [ ]  메뉴의 가격은 항상 0보다 커야한다.
    - [ ]  메뉴가 속할 메뉴 그룹은 필수로 지정되어야 한다.
    - [ ]  메뉴는 최소 하나 이상의 상품을 가지고 있어야 한다.
    - [ ]  메뉴 상품은 1개 이상 포함되어야 한다. 
    - [ ]  메뉴 가격이 메뉴에 포함된 상품의 총 합보다 작아야 한다.
      - [ ]  메뉴 가격이 변경됬을때도 위 조건이 유지되어야 한다. 

- 테이블
  - [ ]  테이블의 이름은 필수이다. 
  - [ ]  테이블 초기화 기능이 있어야 한다. (손님수가 0명이고 점유 여부가 false)
  - [ ]  테이블이 사용중이라면 점유 여부를 True로 설정 해 주어야 한다. 
  - [ ]  테이블에 속한 주문중 완료되지 않은 주문이 있다면 테이블을 정리할수 없다. 
  - [ ]  손님을 배정하려면 테이블이 점유되어있지 않아야 한다. 
  - [ ]  배정할수 있는 손님 수는 0 이상이다. 

- 주문 생성 (공통)
  - [ ] 주문 상태는 WAITING으로 초기화 되어야 한다.
  - [ ] 최소 한개 메뉴 이상 주문해야 한다. 
  - [ ] 주문한 모든 메뉴는 존재해야 한다. 
  - [ ] 주문하는 모든 메뉴들은 display상태여야 한다. 
  - [ ] 주문하는 모든 메뉴들의 값과 주문한 값이 같아야 한다. 
    ```
         if (menu.getPrice().compareTo(orderLineItemRequest.getPrice()) != 0) {
                throw new IllegalArgumentException();
         }
    ```
- 주문 생성 (매장식사)
  - [ ] 주문하는 메뉴의 개수는 음수가 가능하다 
    ```
       if (type != OrderType.EAT_IN) {
           if (quantity < 0) {
               throw new IllegalArgumentException();
           }
       }
    ```
  - [ ] 점유된 테이블과 매핑되어야 한다.
- 주문 생성 (배달)
  - [ ] 주문하는 메뉴의 개수는 반드시 0 이상이여야 한다.
  - [ ] 배달 정보가 반드시 매핑되어야 한다.
- 주문 생성 (테이크아웃)
  - [ ] 주문하는 메뉴의 개수는 반드시 0 이상이여야 한다.

- 주문 수락 
  - [ ] 주문 상태는 WAITING이여야 한다. 
  - [ ] 주문 상태를 ACCEPT로 변경해야 한다. 
- 주문 수락 (배달)
  - [ ] 배달 플랫폼에 배달 요청을 보내야 한다. 
    ```
    kitchenridersClient.requestDelivery(orderId, sum, order.getDeliveryAddress());
    ```

- 서빙
  - [ ] 주문 상태는 ACCEPT여야 한다. 
  - [ ] 주문 상태를 SERVED로 변경해야 한다. 

- 배달 시작 
  - [ ] 주문 상태는 SERVED여야 한다. 
  - [ ] 주문 타입이 배달이여야 한다. 
  - [ ] 주문 상태를 DELIVERING으로 변경해야 한다. 

- 배달 완료 
  - [ ] 주문 상태는 DELIVERING이여야 한다. 
  - [ ] 주문 상태를 DELIVERED로 변경해야 한다. 

- 완료 
  - [ ] 배달 주문이라면 주문 상태가 DELIVERED여야 한다. 
  - [ ] 테이크아웃, 매장 내 식사 주문이라면 주문 상태가 SERVED여야 한다. 
  - [ ] 매장 내 식사라면 점유하고있던 테이블을 초기화 해야 한다. 
  - [ ] 오더 상태를 COMPLETE로 변경해야 한다. 
---

## 용어 사전

| 한글명 | 영문명     | 설명                 |
|-----|---------|--------------------|
| 상품  | Product | 단일 상품을 의미한다        |
| 메뉴 그룹  | MenuGroup | 묶음 메뉴를 의미한다.       |
| 메뉴 | Menu | 메뉴를 의미한다.          |
| 메뉴 상품 | MenuProduct | 메뉴에 속한 상품을 의미한다.   |
| 테이블 | OrderTable | Table을 의미한다.       |
| 주문 | Order | 주문이다               |
| 주문 상품 | OrderLineItem | 주문에 포함된 메뉴들을 의미한다. |

## 모델링
| 한글명 | 영문명     | 설명                                                            |
|-----|---------|---------------------------------------------------------------|
| 상품  | Product | "이름"과 "가격"을 가진다                                  |
| 메뉴 그룹  | MenuGroup | 여러 "메뉴"들을 가진다.                                   |
| 메뉴 | Menu | "메뉴 이름"과 "가격" 그리고 "상품 그룹 ID"을 가진다.                  |
| 메뉴 상품 | MenuProduct | "상품 ID" 와 "해당 상품의 개수" 그리고 속해있는 "메뉴 ID"를 가진다. |
| 테이블 | OrderTable |"이름", "테이블에 앉은 손님 수", "영업 진행중 여부"를 가진다.     |
| 주문 | Order | "주문 정보", "주문 시간", "주문 상태", "주문 타입", "주문 을 하는 테이블 ID"를 가진다.    |
| 주문 상품 | OrderLineItem | "메뉴 ID", "메뉴를 주문한 수량", "주문 ID" 를 가진다.                         |